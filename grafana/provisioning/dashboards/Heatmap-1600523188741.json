{
  "annotations": {
    "list": [
      {
        "builtIn": 1,
        "datasource": "-- Grafana --",
        "enable": true,
        "hide": true,
        "iconColor": "rgba(0, 211, 255, 1)",
        "name": "Annotations & Alerts",
        "type": "dashboard"
      }
    ]
  },
  "editable": true,
  "gnetId": null,
  "graphTooltip": 0,
  "iteration": 1600522979927,
  "links": [
    {
      "$$hashKey": "object:245",
      "asDropdown": true,
      "icon": "external link",
      "includeVars": true,
      "keepTime": true,
      "tags": [],
      "targetBlank": true,
      "title": "Dashboards",
      "type": "dashboards"
    }
  ],
  "panels": [
    {
      "datasource": "Postgres",
      "fieldConfig": {
        "defaults": {
          "custom": {
            "calculation": "sum",
            "colorPalette": "custom",
            "colorSpace": "rgb",
            "groupBy": 60,
            "invertPalette": false,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "yellow",
                  "value": 10
                },
                {
                  "color": "orange",
                  "value": 20
                },
                {
                  "color": "red",
                  "value": 40
                },
                {
                  "color": "blue",
                  "value": 50
                },
                {
                  "color": "purple",
                  "value": 60
                }
              ]
            }
          },
          "max": 100,
          "min": 0,
          "unit": "GB"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 0
      },
      "id": 9,
      "maxPerRow": 2,
      "options": {
        "from": "0",
        "showLegend": true,
        "to": "23"
      },
      "pluginVersion": "7.1.5",
      "repeat": "municipio",
      "repeatDirection": "h",
      "scopedVars": {
        "municipio": {
          "selected": true,
          "text": "Municipio II",
          "value": "Municipio II"
        }
      },
      "targets": [
        {
          "format": "time_series",
          "group": [],
          "metricColumn": "none",
          "rawQuery": true,
          "rawSql": "SELECT \n  starttimestamp AS time,\n  sum(upload)::float / 1000000::float \nFROM \n  connessioni \nWHERE \n  municipio in ($municipio) and \n  EXTRACT(EPOCH FROM starttimestamp)*1000 >= $__from and EXTRACT(EPOCH FROM endtimestamp)*1000 <= $__to and\n  posizione in ($sede)\ngroup by starttimestamp;\n",
          "refId": "A",
          "select": [
            [
              {
                "params": [
                  "value"
                ],
                "type": "column"
              }
            ]
          ],
          "timeColumn": "time",
          "where": [
            {
              "name": "$__timeFilter",
              "params": [],
              "type": "macro"
            }
          ]
        }
      ],
      "timeFrom": null,
      "timeShift": null,
      "title": "$municipio",
      "type": "marcusolsson-hourly-heatmap-panel"
    },
    {
      "datasource": "Postgres",
      "fieldConfig": {
        "defaults": {
          "custom": {
            "calculation": "sum",
            "colorPalette": "custom",
            "colorSpace": "rgb",
            "groupBy": 60,
            "invertPalette": false,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "yellow",
                  "value": 10
                },
                {
                  "color": "orange",
                  "value": 20
                },
                {
                  "color": "red",
                  "value": 40
                },
                {
                  "color": "blue",
                  "value": 50
                },
                {
                  "color": "purple",
                  "value": 60
                }
              ]
            }
          },
          "max": 100,
          "min": 0,
          "unit": "GB"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 0
      },
      "id": 10,
      "maxPerRow": 2,
      "options": {
        "from": "0",
        "showLegend": true,
        "to": "23"
      },
      "pluginVersion": "7.1.5",
      "repeat": null,
      "repeatDirection": "h",
      "repeatIteration": 1600522979927,
      "repeatPanelId": 9,
      "scopedVars": {
        "municipio": {
          "selected": true,
          "text": "Municipio III",
          "value": "Municipio III"
        }
      },
      "targets": [
        {
          "format": "time_series",
          "group": [],
          "metricColumn": "none",
          "rawQuery": true,
          "rawSql": "SELECT \n  starttimestamp AS time,\n  sum(upload)::float / 1000000::float \nFROM \n  connessioni \nWHERE \n  municipio in ($municipio) and \n  EXTRACT(EPOCH FROM starttimestamp)*1000 >= $__from and EXTRACT(EPOCH FROM endtimestamp)*1000 <= $__to and\n  posizione in ($sede)\ngroup by starttimestamp;\n",
          "refId": "A",
          "select": [
            [
              {
                "params": [
                  "value"
                ],
                "type": "column"
              }
            ]
          ],
          "timeColumn": "time",
          "where": [
            {
              "name": "$__timeFilter",
              "params": [],
              "type": "macro"
            }
          ]
        }
      ],
      "timeFrom": null,
      "timeShift": null,
      "title": "$municipio",
      "type": "marcusolsson-hourly-heatmap-panel"
    },
    {
      "datasource": "Postgres",
      "fieldConfig": {
        "defaults": {
          "custom": {
            "calculation": "sum",
            "colorPalette": "custom",
            "colorSpace": "rgb",
            "groupBy": 60,
            "invertPalette": false,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "yellow",
                  "value": 10
                },
                {
                  "color": "orange",
                  "value": 20
                },
                {
                  "color": "red",
                  "value": 40
                },
                {
                  "color": "blue",
                  "value": 50
                },
                {
                  "color": "purple",
                  "value": 60
                }
              ]
            }
          },
          "max": 100,
          "min": 0,
          "unit": "GB"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 8
      },
      "id": 11,
      "maxPerRow": 2,
      "options": {
        "from": "0",
        "showLegend": true,
        "to": "23"
      },
      "pluginVersion": "7.1.5",
      "repeat": null,
      "repeatDirection": "h",
      "repeatIteration": 1600522979927,
      "repeatPanelId": 9,
      "scopedVars": {
        "municipio": {
          "selected": true,
          "text": "Municipio IV",
          "value": "Municipio IV"
        }
      },
      "targets": [
        {
          "format": "time_series",
          "group": [],
          "metricColumn": "none",
          "rawQuery": true,
          "rawSql": "SELECT \n  starttimestamp AS time,\n  sum(upload)::float / 1000000::float \nFROM \n  connessioni \nWHERE \n  municipio in ($municipio) and \n  EXTRACT(EPOCH FROM starttimestamp)*1000 >= $__from and EXTRACT(EPOCH FROM endtimestamp)*1000 <= $__to and\n  posizione in ($sede)\ngroup by starttimestamp;\n",
          "refId": "A",
          "select": [
            [
              {
                "params": [
                  "value"
                ],
                "type": "column"
              }
            ]
          ],
          "timeColumn": "time",
          "where": [
            {
              "name": "$__timeFilter",
              "params": [],
              "type": "macro"
            }
          ]
        }
      ],
      "timeFrom": null,
      "timeShift": null,
      "title": "$municipio",
      "type": "marcusolsson-hourly-heatmap-panel"
    },
    {
      "datasource": "Postgres",
      "fieldConfig": {
        "defaults": {
          "custom": {
            "calculation": "sum",
            "colorPalette": "custom",
            "colorSpace": "rgb",
            "groupBy": 60,
            "invertPalette": false,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "yellow",
                  "value": 10
                },
                {
                  "color": "orange",
                  "value": 20
                },
                {
                  "color": "red",
                  "value": 40
                },
                {
                  "color": "blue",
                  "value": 50
                },
                {
                  "color": "purple",
                  "value": 60
                }
              ]
            }
          },
          "max": 100,
          "min": 0,
          "unit": "GB"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 8
      },
      "id": 12,
      "maxPerRow": 2,
      "options": {
        "from": "0",
        "showLegend": true,
        "to": "23"
      },
      "pluginVersion": "7.1.5",
      "repeat": null,
      "repeatDirection": "h",
      "repeatIteration": 1600522979927,
      "repeatPanelId": 9,
      "scopedVars": {
        "municipio": {
          "selected": true,
          "text": "Municipio VI",
          "value": "Municipio VI"
        }
      },
      "targets": [
        {
          "format": "time_series",
          "group": [],
          "metricColumn": "none",
          "rawQuery": true,
          "rawSql": "SELECT \n  starttimestamp AS time,\n  sum(upload)::float / 1000000::float \nFROM \n  connessioni \nWHERE \n  municipio in ($municipio) and \n  EXTRACT(EPOCH FROM starttimestamp)*1000 >= $__from and EXTRACT(EPOCH FROM endtimestamp)*1000 <= $__to and\n  posizione in ($sede)\ngroup by starttimestamp;\n",
          "refId": "A",
          "select": [
            [
              {
                "params": [
                  "value"
                ],
                "type": "column"
              }
            ]
          ],
          "timeColumn": "time",
          "where": [
            {
              "name": "$__timeFilter",
              "params": [],
              "type": "macro"
            }
          ]
        }
      ],
      "timeFrom": null,
      "timeShift": null,
      "title": "$municipio",
      "type": "marcusolsson-hourly-heatmap-panel"
    }
  ],
  "refresh": false,
  "schemaVersion": 26,
  "style": "dark",
  "tags": [],
  "templating": {
    "list": [
      {
        "allValue": null,
        "current": {
          "selected": false,
          "text": [
            "Municipio II",
            "Municipio III",
            "Municipio VI",
            "Municipio IV"
          ],
          "value": [
            "Municipio II",
            "Municipio III",
            "Municipio VI",
            "Municipio IV"
          ]
        },
        "datasource": "Postgres",
        "definition": "select municipio from connessioni group by municipio;",
        "hide": 0,
        "includeAll": false,
        "label": "Municipio",
        "multi": true,
        "name": "municipio",
        "options": [
          {
            "selected": false,
            "text": "Municipio  XII",
            "value": "Municipio  XII"
          },
          {
            "selected": false,
            "text": "Municipio I",
            "value": "Municipio I"
          },
          {
            "selected": true,
            "text": "Municipio II",
            "value": "Municipio II"
          },
          {
            "selected": true,
            "text": "Municipio III",
            "value": "Municipio III"
          },
          {
            "selected": true,
            "text": "Municipio IV",
            "value": "Municipio IV"
          },
          {
            "selected": false,
            "text": "Municipio IX",
            "value": "Municipio IX"
          },
          {
            "selected": false,
            "text": "Municipio V",
            "value": "Municipio V"
          },
          {
            "selected": true,
            "text": "Municipio VI",
            "value": "Municipio VI"
          },
          {
            "selected": false,
            "text": "Municipio VII",
            "value": "Municipio VII"
          },
          {
            "selected": false,
            "text": "Municipio VIII",
            "value": "Municipio VIII"
          },
          {
            "selected": false,
            "text": "Municipio X",
            "value": "Municipio X"
          },
          {
            "selected": false,
            "text": "Municipio XI",
            "value": "Municipio XI"
          },
          {
            "selected": false,
            "text": "Municipio XII",
            "value": "Municipio XII"
          },
          {
            "selected": false,
            "text": "Municipio XIII",
            "value": "Municipio XIII"
          },
          {
            "selected": false,
            "text": "Municipio XIV",
            "value": "Municipio XIV"
          },
          {
            "selected": false,
            "text": "Municipio XV",
            "value": "Municipio XV"
          }
        ],
        "query": "select municipio from connessioni group by municipio;",
        "refresh": 0,
        "regex": "",
        "skipUrlSync": false,
        "sort": 1,
        "tagValuesQuery": "",
        "tags": [],
        "tagsQuery": "",
        "type": "query",
        "useTags": false
      },
      {
        "allValue": null,
        "current": {
          "selected": false,
          "text": [
            "Piazza Giuseppe Gola, 61, Roma",
            "Piazza Grecia, 23/25, Roma",
            "Piazza Paolo Rossi, 6, Roma",
            "Piazza Riccardo Balsamo Crivelli, 66, Roma",
            "Piazza Sempione, 15, Roma",
            "Piazzale Hegel, 14, Roma",
            "Via Amedeo Sommovigo, 40, Roma",
            "Via Calcinaia, 44, Roma",
            "Via Calimera, 133, Roma",
            "Via Campania, 63, Roma",
            "Via Canterano, 12, Roma",
            "Via Dire Daua, 11, Roma",
            "Via Eufrasia Martinetti, 21, Roma",
            "Via Fabriano, 59, Roma",
            "Via Federigo Verdinois, 54, Roma",
            "Via Fermo Corni, 20, Roma",
            "Via Flavio Ando, 12, Roma",
            "Via Goito, 35, Roma",
            "Via Jaime Pintor, 6, Roma",
            "Via Libero Leonardi, 153, Roma",
            "Via Monte Ruggero, 39, Roma",
            "Via Nomentana, 70, Roma",
            "Via Pollenza, 54, Roma",
            "Via Rugantino, 113, Roma",
            "Via Savoia, 13, Roma",
            "Via Tiburtina Antica, 25, Roma",
            "Via Tiburtina, 1163, Roma",
            "Via Ulisse Aldrovandi, 18, Roma",
            "Via Val Maggia, 21, Roma",
            "Via Val di Lanzo, 187, Roma",
            "Via del Tufo, 27, Roma",
            "Via di San Romano, 14/A, Roma",
            "Viale Adriatico, 140, Roma",
            "Viale Duilio Cambellotti, 11, Roma"
          ],
          "value": [
            "Piazza Giuseppe Gola, 61, Roma",
            "Piazza Grecia, 23/25, Roma",
            "Piazza Paolo Rossi, 6, Roma",
            "Piazza Riccardo Balsamo Crivelli, 66, Roma",
            "Piazza Sempione, 15, Roma",
            "Piazzale Hegel, 14, Roma",
            "Via Amedeo Sommovigo, 40, Roma",
            "Via Calcinaia, 44, Roma",
            "Via Calimera, 133, Roma",
            "Via Campania, 63, Roma",
            "Via Canterano, 12, Roma",
            "Via Dire Daua, 11, Roma",
            "Via Eufrasia Martinetti, 21, Roma",
            "Via Fabriano, 59, Roma",
            "Via Federigo Verdinois, 54, Roma",
            "Via Fermo Corni, 20, Roma",
            "Via Flavio Ando, 12, Roma",
            "Via Goito, 35, Roma",
            "Via Jaime Pintor, 6, Roma",
            "Via Libero Leonardi, 153, Roma",
            "Via Monte Ruggero, 39, Roma",
            "Via Nomentana, 70, Roma",
            "Via Pollenza, 54, Roma",
            "Via Rugantino, 113, Roma",
            "Via Savoia, 13, Roma",
            "Via Tiburtina Antica, 25, Roma",
            "Via Tiburtina, 1163, Roma",
            "Via Ulisse Aldrovandi, 18, Roma",
            "Via Val Maggia, 21, Roma",
            "Via Val di Lanzo, 187, Roma",
            "Via del Tufo, 27, Roma",
            "Via di San Romano, 14/A, Roma",
            "Viale Adriatico, 140, Roma",
            "Viale Duilio Cambellotti, 11, Roma"
          ]
        },
        "datasource": "Postgres",
        "definition": "select posizione from connessioni where municipio in ($municipio) group by posizione;",
        "hide": 0,
        "includeAll": false,
        "label": "Sede",
        "multi": true,
        "name": "sede",
        "options": [
          {
            "selected": true,
            "text": "Piazza Giuseppe Gola, 61, Roma",
            "value": "Piazza Giuseppe Gola, 61, Roma"
          },
          {
            "selected": true,
            "text": "Piazza Grecia, 23/25, Roma",
            "value": "Piazza Grecia, 23/25, Roma"
          },
          {
            "selected": true,
            "text": "Piazza Paolo Rossi, 6, Roma",
            "value": "Piazza Paolo Rossi, 6, Roma"
          },
          {
            "selected": true,
            "text": "Piazza Riccardo Balsamo Crivelli, 66, Roma",
            "value": "Piazza Riccardo Balsamo Crivelli, 66, Roma"
          },
          {
            "selected": true,
            "text": "Piazza Sempione, 15, Roma",
            "value": "Piazza Sempione, 15, Roma"
          },
          {
            "selected": true,
            "text": "Piazzale Hegel, 14, Roma",
            "value": "Piazzale Hegel, 14, Roma"
          },
          {
            "selected": true,
            "text": "Via Amedeo Sommovigo, 40, Roma",
            "value": "Via Amedeo Sommovigo, 40, Roma"
          },
          {
            "selected": true,
            "text": "Via Calcinaia, 44, Roma",
            "value": "Via Calcinaia, 44, Roma"
          },
          {
            "selected": true,
            "text": "Via Calimera, 133, Roma",
            "value": "Via Calimera, 133, Roma"
          },
          {
            "selected": true,
            "text": "Via Campania, 63, Roma",
            "value": "Via Campania, 63, Roma"
          },
          {
            "selected": true,
            "text": "Via Canterano, 12, Roma",
            "value": "Via Canterano, 12, Roma"
          },
          {
            "selected": true,
            "text": "Via Dire Daua, 11, Roma",
            "value": "Via Dire Daua, 11, Roma"
          },
          {
            "selected": true,
            "text": "Via Eufrasia Martinetti, 21, Roma",
            "value": "Via Eufrasia Martinetti, 21, Roma"
          },
          {
            "selected": true,
            "text": "Via Fabriano, 59, Roma",
            "value": "Via Fabriano, 59, Roma"
          },
          {
            "selected": true,
            "text": "Via Federigo Verdinois, 54, Roma",
            "value": "Via Federigo Verdinois, 54, Roma"
          },
          {
            "selected": true,
            "text": "Via Fermo Corni, 20, Roma",
            "value": "Via Fermo Corni, 20, Roma"
          },
          {
            "selected": true,
            "text": "Via Flavio Ando, 12, Roma",
            "value": "Via Flavio Ando, 12, Roma"
          },
          {
            "selected": true,
            "text": "Via Goito, 35, Roma",
            "value": "Via Goito, 35, Roma"
          },
          {
            "selected": true,
            "text": "Via Jaime Pintor, 6, Roma",
            "value": "Via Jaime Pintor, 6, Roma"
          },
          {
            "selected": true,
            "text": "Via Libero Leonardi, 153, Roma",
            "value": "Via Libero Leonardi, 153, Roma"
          },
          {
            "selected": true,
            "text": "Via Monte Ruggero, 39, Roma",
            "value": "Via Monte Ruggero, 39, Roma"
          },
          {
            "selected": true,
            "text": "Via Nomentana, 70, Roma",
            "value": "Via Nomentana, 70, Roma"
          },
          {
            "selected": true,
            "text": "Via Pollenza, 54, Roma",
            "value": "Via Pollenza, 54, Roma"
          },
          {
            "selected": true,
            "text": "Via Rugantino, 113, Roma",
            "value": "Via Rugantino, 113, Roma"
          },
          {
            "selected": true,
            "text": "Via Savoia, 13, Roma",
            "value": "Via Savoia, 13, Roma"
          },
          {
            "selected": true,
            "text": "Via Tiburtina Antica, 25, Roma",
            "value": "Via Tiburtina Antica, 25, Roma"
          },
          {
            "selected": true,
            "text": "Via Tiburtina, 1163, Roma",
            "value": "Via Tiburtina, 1163, Roma"
          },
          {
            "selected": true,
            "text": "Via Ulisse Aldrovandi, 18, Roma",
            "value": "Via Ulisse Aldrovandi, 18, Roma"
          },
          {
            "selected": true,
            "text": "Via Val Maggia, 21, Roma",
            "value": "Via Val Maggia, 21, Roma"
          },
          {
            "selected": true,
            "text": "Via Val di Lanzo, 187, Roma",
            "value": "Via Val di Lanzo, 187, Roma"
          },
          {
            "selected": true,
            "text": "Via del Tufo, 27, Roma",
            "value": "Via del Tufo, 27, Roma"
          },
          {
            "selected": true,
            "text": "Via di San Romano, 14/A, Roma",
            "value": "Via di San Romano, 14/A, Roma"
          },
          {
            "selected": true,
            "text": "Viale Adriatico, 140, Roma",
            "value": "Viale Adriatico, 140, Roma"
          },
          {
            "selected": true,
            "text": "Viale Duilio Cambellotti, 11, Roma",
            "value": "Viale Duilio Cambellotti, 11, Roma"
          }
        ],
        "query": "select posizione from connessioni where municipio in ($municipio) group by posizione;",
        "refresh": 0,
        "regex": "",
        "skipUrlSync": false,
        "sort": 1,
        "tagValuesQuery": "",
        "tags": [],
        "tagsQuery": "",
        "type": "query",
        "useTags": false
      }
    ]
  },
  "time": {
    "from": "2020-06-01T00:00:00.000Z",
    "to": "2020-08-31T23:59:59.000Z"
  },
  "timepicker": {
    "refresh_intervals": [
      "5s",
      "10s",
      "30s",
      "1m",
      "5m",
      "15m",
      "30m",
      "1h",
      "2h",
      "1d"
    ]
  },
  "timezone": "utc",
  "title": "Heatmap",
  "uid": "xkQNiBdMz",
  "version": 1
}