{
  "annotations": {
    "list": [
      {
        "builtIn": 1,
        "datasource": "-- Grafana --",
        "enable": true,
        "hide": true,
        "iconColor": "rgba(0, 211, 255, 1)",
        "name": "Annotations & Alerts",
        "type": "dashboard"
      }
    ]
  },
  "editable": true,
  "gnetId": null,
  "graphTooltip": 0,
  "iteration": 1600516996838,
  "links": [],
  "panels": [
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": "Postgres",
      "fieldConfig": {
        "defaults": {
          "custom": {}
        },
        "overrides": []
      },
      "fill": 1,
      "fillGradient": 0,
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 0
      },
      "hiddenSeries": false,
      "id": 7,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "percentage": false,
      "pluginVersion": "7.1.5",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "format": "time_series",
          "group": [
            {
              "params": [
                "starttimestamp"
              ],
              "type": "column"
            }
          ],
          "metricColumn": "municipio",
          "rawQuery": true,
          "rawSql": "SELECT \n  starttimestamp AS time,\n  municipio,\n  (sum(upload)::float / 1000000::float) AS upload,\n  (sum(download)::float / 1000000::float) AS download\nFROM \n  connessioni \nWHERE \n  municipio in ($municipio) and \n  EXTRACT(EPOCH FROM starttimestamp)*1000 >= $__from and EXTRACT(EPOCH FROM endtimestamp)*1000 <= $__to and\n  posizione in ($sede)\nGROUP BY starttimestamp,municipio;",
          "refId": "A",
          "select": [
            [
              {
                "params": [
                  "download"
                ],
                "type": "column"
              },
              {
                "params": [
                  "sum"
                ],
                "type": "aggregate"
              },
              {
                "params": [
                  "download"
                ],
                "type": "alias"
              }
            ],
            [
              {
                "params": [
                  "upload"
                ],
                "type": "column"
              },
              {
                "params": [
                  "sum"
                ],
                "type": "aggregate"
              },
              {
                "params": [
                  "upload"
                ],
                "type": "alias"
              }
            ]
          ],
          "table": "connessioni",
          "timeColumn": "starttimestamp",
          "timeColumnType": "timestamptz",
          "where": []
        }
      ],
      "thresholds": [],
      "timeFrom": null,
      "timeRegions": [],
      "timeShift": null,
      "title": "Panel Title",
      "tooltip": {
        "shared": true,
        "sort": 0,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "buckets": null,
        "mode": "time",
        "name": null,
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "format": "short",
          "label": null,
          "logBase": 1,
          "max": null,
          "min": null,
          "show": true
        },
        {
          "format": "short",
          "label": null,
          "logBase": 1,
          "max": null,
          "min": null,
          "show": true
        }
      ],
      "yaxis": {
        "align": false,
        "alignLevel": null
      }
    },
    {
      "datasource": null,
      "fieldConfig": {
        "defaults": {
          "custom": {}
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 24,
        "x": 0,
        "y": 8
      },
      "id": 5,
      "options": {
        "content": "<table align='center'>\n    <tr>\n        <td>Municipi selezionati</td>\n        <td colspan=\"3\">${municipio}</td>\n    </tr>\n    <tr>\n        <td>Dal</td>\n        <td>${__from:date:DD/MM/YYYY} </td>\n         <td>Al</td>\n        <td>${__to:date:DD/MM/YYYY} </td>\n    </tr>\n</table>\n\n         ",
        "mode": "html"
      },
      "pluginVersion": "7.1.0",
      "timeFrom": null,
      "timeShift": null,
      "title": "Panel Title",
      "type": "text"
    },
    {
      "circleMaxSize": "25",
      "circleMinSize": "2",
      "colors": [
        "#37872D",
        "#E0B400",
        "#FF9830",
        "#F2495C"
      ],
      "datasource": "Postgres",
      "decimals": 3,
      "esMetric": "Count",
      "fieldConfig": {
        "defaults": {
          "custom": {}
        },
        "overrides": []
      },
      "gridPos": {
        "h": 15,
        "w": 12,
        "x": 0,
        "y": 12
      },
      "hideEmpty": true,
      "hideZero": true,
      "id": 2,
      "initialZoom": "11",
      "locationData": "table",
      "mapCenter": "custom",
      "mapCenterLatitude": "41.9028",
      "mapCenterLongitude": "12.4964",
      "maxDataPoints": 1,
      "mouseWheelZoom": true,
      "pluginVersion": "7.1.5",
      "repeat": null,
      "repeatDirection": "v",
      "showLegend": true,
      "stickyLabels": false,
      "tableQueryOptions": {
        "geohashField": "geohash",
        "labelField": "posizione",
        "latitudeField": "latitudine",
        "longitudeField": "longitudine",
        "metricField": "tipologia",
        "queryType": "coordinates"
      },
      "targets": [
        {
          "format": "table",
          "group": [],
          "hide": false,
          "metricColumn": "none",
          "rawQuery": true,
          "rawSql": "select posizione, longitudine, latitudine, (avg(upload)::float / 1000000::float) as tipologia from connessioni \nwhere municipio in ($municipio) and \nEXTRACT(EPOCH FROM starttimestamp)*1000 >= $__from and EXTRACT(EPOCH FROM endtimestamp)*1000 <= $__to and\nposizione in ($sede)\ngroup by (posizione, longitudine, latitudine);\n",
          "refId": "A",
          "select": [
            [
              {
                "params": [
                  "value"
                ],
                "type": "column"
              }
            ]
          ],
          "timeColumn": "time",
          "where": [
            {
              "name": "$__timeFilter",
              "params": [],
              "type": "macro"
            }
          ]
        }
      ],
      "thresholds": "1, 100, 200",
      "timeFrom": null,
      "timeShift": null,
      "title": "Average UPLOAD",
      "transformations": [],
      "type": "grafana-worldmap-panel",
      "unitPlural": "GB",
      "unitSingle": "",
      "unitSingular": "GB",
      "valueName": "total"
    },
    {
      "circleMaxSize": "20",
      "circleMinSize": "2",
      "colors": [
        "#37872D",
        "#E0B400",
        "#FA6400",
        "#E02F44",
        "#8F3BB8"
      ],
      "datasource": "Postgres",
      "decimals": 2,
      "esMetric": "Count",
      "fieldConfig": {
        "defaults": {
          "custom": {}
        },
        "overrides": []
      },
      "gridPos": {
        "h": 15,
        "w": 12,
        "x": 12,
        "y": 12
      },
      "hideEmpty": true,
      "hideZero": true,
      "id": 3,
      "initialZoom": "11",
      "locationData": "table",
      "mapCenter": "custom",
      "mapCenterLatitude": "41.9028",
      "mapCenterLongitude": "12.4964",
      "maxDataPoints": 1,
      "mouseWheelZoom": true,
      "pluginVersion": "7.1.5",
      "repeatDirection": "v",
      "showLegend": true,
      "stickyLabels": false,
      "tableQueryOptions": {
        "geohashField": "geohash",
        "labelField": "posizione",
        "latitudeField": "latitudine",
        "longitudeField": "longitudine",
        "metricField": "tipologia",
        "queryType": "coordinates"
      },
      "targets": [
        {
          "format": "table",
          "group": [],
          "hide": false,
          "metricColumn": "none",
          "rawQuery": true,
          "rawSql": "select posizione, longitudine, latitudine, div(avg(download), 1000) as tipologia from connessioni \nwhere municipio in ($municipio) and \nEXTRACT(EPOCH FROM starttimestamp)*1000 >= $__from and EXTRACT(EPOCH FROM endtimestamp)*1000 <= $__to and\nposizione in ($sede)\ngroup by (posizione, longitudine, latitudine);\n",
          "refId": "A",
          "select": [
            [
              {
                "params": [
                  "value"
                ],
                "type": "column"
              }
            ]
          ],
          "timeColumn": "time",
          "where": [
            {
              "name": "$__timeFilter",
              "params": [],
              "type": "macro"
            }
          ]
        }
      ],
      "thresholds": "5000, 10000, 15000, 20000",
      "timeFrom": null,
      "timeShift": null,
      "title": "Average UPLOAD",
      "transformations": [],
      "type": "grafana-worldmap-panel",
      "unitPlural": "MB",
      "unitSingle": "",
      "unitSingular": "MB",
      "valueName": "total"
    }
  ],
  "refresh": false,
  "schemaVersion": 26,
  "style": "dark",
  "tags": [],
  "templating": {
    "list": [
      {
        "allValue": null,
        "current": {
          "selected": true,
          "tags": [],
          "text": [
            "Municipio I",
            "Municipio IX",
            "Municipio II"
          ],
          "value": [
            "Municipio I",
            "Municipio IX",
            "Municipio II"
          ]
        },
        "datasource": "Postgres",
        "definition": "select municipio from connessioni group by municipio;",
        "hide": 0,
        "includeAll": false,
        "label": "Municipio",
        "multi": true,
        "name": "municipio",
        "options": [
          {
            "selected": false,
            "text": "Municipio  XII",
            "value": "Municipio  XII"
          },
          {
            "selected": true,
            "text": "Municipio I",
            "value": "Municipio I"
          },
          {
            "selected": true,
            "text": "Municipio II",
            "value": "Municipio II"
          },
          {
            "selected": false,
            "text": "Municipio III",
            "value": "Municipio III"
          },
          {
            "selected": false,
            "text": "Municipio IV",
            "value": "Municipio IV"
          },
          {
            "selected": true,
            "text": "Municipio IX",
            "value": "Municipio IX"
          },
          {
            "selected": false,
            "text": "Municipio V",
            "value": "Municipio V"
          },
          {
            "selected": false,
            "text": "Municipio VI",
            "value": "Municipio VI"
          },
          {
            "selected": false,
            "text": "Municipio VII",
            "value": "Municipio VII"
          },
          {
            "selected": false,
            "text": "Municipio VIII",
            "value": "Municipio VIII"
          },
          {
            "selected": false,
            "text": "Municipio X",
            "value": "Municipio X"
          },
          {
            "selected": false,
            "text": "Municipio XI",
            "value": "Municipio XI"
          },
          {
            "selected": false,
            "text": "Municipio XII",
            "value": "Municipio XII"
          },
          {
            "selected": false,
            "text": "Municipio XIII",
            "value": "Municipio XIII"
          },
          {
            "selected": false,
            "text": "Municipio XIV",
            "value": "Municipio XIV"
          },
          {
            "selected": false,
            "text": "Municipio XV",
            "value": "Municipio XV"
          }
        ],
        "query": "select municipio from connessioni group by municipio;",
        "refresh": 0,
        "regex": "",
        "skipUrlSync": false,
        "sort": 1,
        "tagValuesQuery": "",
        "tags": [],
        "tagsQuery": "",
        "type": "query",
        "useTags": false
      },
      {
        "allValue": null,
        "current": {
          "selected": true,
          "text": [
            "Piazza Giovanni Agnelli, 10, Roma",
            "Via Cristoforo Colombo, 570, Roma",
            "Via Giovanni Frignani, 97, Roma",
            "Via Ignazio  Silone, 100, Roma",
            "Via Luigi Chiarini, 400, Roma",
            "Via Paolo Renzi, 47, Roma",
            "Via Santi Savarino, 16, Roma",
            "Via del Turismo, 30/32, Roma",
            "Via di Decima, 96/102, Roma",
            "Viale Africa, 109, Roma",
            "Viale dei Caduti nella Guerra di Liberazione, 258, Roma",
            "Viale dell'Oceano Indiano, 64, Roma",
            "Viale dell'Oceano Pacifico, 83, Roma",
            "Viale della Civilta del Lavoro, 10, Roma",
            "Viale della CiviltÃ  del Lavoro, 10, Roma",
            "Viale della Previdenza Sociale, 20, Roma"
          ],
          "value": [
            "Piazza Giovanni Agnelli, 10, Roma",
            "Via Cristoforo Colombo, 570, Roma",
            "Via Giovanni Frignani, 97, Roma",
            "Via Ignazio  Silone, 100, Roma",
            "Via Luigi Chiarini, 400, Roma",
            "Via Paolo Renzi, 47, Roma",
            "Via Santi Savarino, 16, Roma",
            "Via del Turismo, 30/32, Roma",
            "Via di Decima, 96/102, Roma",
            "Viale Africa, 109, Roma",
            "Viale dei Caduti nella Guerra di Liberazione, 258, Roma",
            "Viale dell'Oceano Indiano, 64, Roma",
            "Viale dell'Oceano Pacifico, 83, Roma",
            "Viale della Civilta del Lavoro, 10, Roma",
            "Viale della CiviltÃ  del Lavoro, 10, Roma",
            "Viale della Previdenza Sociale, 20, Roma"
          ]
        },
        "datasource": "Postgres",
        "definition": "select posizione from connessioni where municipio in ($municipio) group by posizione;",
        "hide": 0,
        "includeAll": false,
        "label": "Sede",
        "multi": true,
        "name": "sede",
        "options": [
          {
            "selected": false,
            "text": "Circonvallazione Trionfale, 19, Roma",
            "value": "Circonvallazione Trionfale, 19, Roma"
          },
          {
            "selected": false,
            "text": "Largo Ascianghi, 4, Roma",
            "value": "Largo Ascianghi, 4, Roma"
          },
          {
            "selected": false,
            "text": "Lungotevere in Augusta, 11, Roma",
            "value": "Lungotevere in Augusta, 11, Roma"
          },
          {
            "selected": false,
            "text": "Piazza Di Porta Metronia, 2, Roma",
            "value": "Piazza Di Porta Metronia, 2, Roma"
          },
          {
            "selected": true,
            "text": "Piazza Giovanni Agnelli, 10, Roma",
            "value": "Piazza Giovanni Agnelli, 10, Roma"
          },
          {
            "selected": false,
            "text": "Piazza Giuseppe Mazzini, 41, Roma",
            "value": "Piazza Giuseppe Mazzini, 41, Roma"
          },
          {
            "selected": false,
            "text": "Piazza Grecia, 23/25, Roma",
            "value": "Piazza Grecia, 23/25, Roma"
          },
          {
            "selected": false,
            "text": "Piazza Lovatelli, 35, Roma",
            "value": "Piazza Lovatelli, 35, Roma"
          },
          {
            "selected": false,
            "text": "Piazza Orazio Giustiniani, 4, Roma",
            "value": "Piazza Orazio Giustiniani, 4, Roma"
          },
          {
            "selected": false,
            "text": "Piazza San Pantaleo, 10, Roma",
            "value": "Piazza San Pantaleo, 10, Roma"
          },
          {
            "selected": false,
            "text": "Piazza del Campidoglio, 1, Roma",
            "value": "Piazza del Campidoglio, 1, Roma"
          },
          {
            "selected": false,
            "text": "Piazza di Campitelli, 7, Roma",
            "value": "Piazza di Campitelli, 7, Roma"
          },
          {
            "selected": false,
            "text": "Piazza di Ponte Umberto I, 1, Roma",
            "value": "Piazza di Ponte Umberto I, 1, Roma"
          },
          {
            "selected": false,
            "text": "Via 4 Novembre, 94, Roma",
            "value": "Via 4 Novembre, 94, Roma"
          },
          {
            "selected": false,
            "text": "Via Antonio Mordini, 19, Roma",
            "value": "Via Antonio Mordini, 19, Roma"
          },
          {
            "selected": false,
            "text": "Via Campania, 63, Roma",
            "value": "Via Campania, 63, Roma"
          },
          {
            "selected": true,
            "text": "Via Cristoforo Colombo, 570, Roma",
            "value": "Via Cristoforo Colombo, 570, Roma"
          },
          {
            "selected": false,
            "text": "Via Dire Daua, 11, Roma",
            "value": "Via Dire Daua, 11, Roma"
          },
          {
            "selected": false,
            "text": "Via Ennio Quirino Visconti, 13, Roma",
            "value": "Via Ennio Quirino Visconti, 13, Roma"
          },
          {
            "selected": false,
            "text": "Via Gabriele Camozzi, 4, Roma",
            "value": "Via Gabriele Camozzi, 4, Roma"
          },
          {
            "selected": false,
            "text": "Via Gabriele Camozzi, 8, Roma",
            "value": "Via Gabriele Camozzi, 8, Roma"
          },
          {
            "selected": true,
            "text": "Via Giovanni Frignani, 97, Roma",
            "value": "Via Giovanni Frignani, 97, Roma"
          },
          {
            "selected": false,
            "text": "Via Giulia, 25, Roma",
            "value": "Via Giulia, 25, Roma"
          },
          {
            "selected": false,
            "text": "Via Goito, 35, Roma",
            "value": "Via Goito, 35, Roma"
          },
          {
            "selected": true,
            "text": "Via Ignazio  Silone, 100, Roma",
            "value": "Via Ignazio  Silone, 100, Roma"
          },
          {
            "selected": true,
            "text": "Via Luigi Chiarini, 400, Roma",
            "value": "Via Luigi Chiarini, 400, Roma"
          },
          {
            "selected": false,
            "text": "Via Luigi Petroselli, 45, Roma",
            "value": "Via Luigi Petroselli, 45, Roma"
          },
          {
            "selected": false,
            "text": "Via Luigi Petroselli, 50, Roma",
            "value": "Via Luigi Petroselli, 50, Roma"
          },
          {
            "selected": false,
            "text": "Via Merulana, 123, Roma",
            "value": "Via Merulana, 123, Roma"
          },
          {
            "selected": false,
            "text": "Via Nomentana, 70, Roma",
            "value": "Via Nomentana, 70, Roma"
          },
          {
            "selected": true,
            "text": "Via Paolo Renzi, 47, Roma",
            "value": "Via Paolo Renzi, 47, Roma"
          },
          {
            "selected": true,
            "text": "Via Santi Savarino, 16, Roma",
            "value": "Via Santi Savarino, 16, Roma"
          },
          {
            "selected": false,
            "text": "Via Savoia, 13, Roma",
            "value": "Via Savoia, 13, Roma"
          },
          {
            "selected": false,
            "text": "Via Tiburtina Antica, 25, Roma",
            "value": "Via Tiburtina Antica, 25, Roma"
          },
          {
            "selected": false,
            "text": "Via Trionfale, 45, Roma",
            "value": "Via Trionfale, 45, Roma"
          },
          {
            "selected": false,
            "text": "Via Ulisse Aldrovandi, 18, Roma",
            "value": "Via Ulisse Aldrovandi, 18, Roma"
          },
          {
            "selected": false,
            "text": "Via dei Cerchi, 6, Roma",
            "value": "Via dei Cerchi, 6, Roma"
          },
          {
            "selected": false,
            "text": "Via del Colosseo, 62, Roma",
            "value": "Via del Colosseo, 62, Roma"
          },
          {
            "selected": false,
            "text": "Via del Tempio di Giove, 21, Roma",
            "value": "Via del Tempio di Giove, 21, Roma"
          },
          {
            "selected": false,
            "text": "Via del Tempio di Giove, 3, Roma",
            "value": "Via del Tempio di Giove, 3, Roma"
          },
          {
            "selected": false,
            "text": "Via del Tritone, 142, Roma",
            "value": "Via del Tritone, 142, Roma"
          },
          {
            "selected": true,
            "text": "Via del Turismo, 30/32, Roma",
            "value": "Via del Turismo, 30/32, Roma"
          },
          {
            "selected": false,
            "text": "Via della Consolazione, 4, Roma",
            "value": "Via della Consolazione, 4, Roma"
          },
          {
            "selected": false,
            "text": "Via della Greca, 5, Roma",
            "value": "Via della Greca, 5, Roma"
          },
          {
            "selected": false,
            "text": "Via delle Tre Pile, 1, Roma",
            "value": "Via delle Tre Pile, 1, Roma"
          },
          {
            "selected": true,
            "text": "Via di Decima, 96/102, Roma",
            "value": "Via di Decima, 96/102, Roma"
          },
          {
            "selected": false,
            "text": "Via di Monte Tarpeo, 41, Roma",
            "value": "Via di Monte Tarpeo, 41, Roma"
          },
          {
            "selected": true,
            "text": "Viale Africa, 109, Roma",
            "value": "Viale Africa, 109, Roma"
          },
          {
            "selected": true,
            "text": "Viale dei Caduti nella Guerra di Liberazione, 258, Roma",
            "value": "Viale dei Caduti nella Guerra di Liberazione, 258, Roma"
          },
          {
            "selected": true,
            "text": "Viale dell'Oceano Indiano, 64, Roma",
            "value": "Viale dell'Oceano Indiano, 64, Roma"
          },
          {
            "selected": true,
            "text": "Viale dell'Oceano Pacifico, 83, Roma",
            "value": "Viale dell'Oceano Pacifico, 83, Roma"
          },
          {
            "selected": false,
            "text": "Viale dell'Uccelliera, 1, Roma",
            "value": "Viale dell'Uccelliera, 1, Roma"
          },
          {
            "selected": true,
            "text": "Viale della Civilta del Lavoro, 10, Roma",
            "value": "Viale della Civilta del Lavoro, 10, Roma"
          },
          {
            "selected": true,
            "text": "Viale della CiviltÃ  del Lavoro, 10, Roma",
            "value": "Viale della CiviltÃ  del Lavoro, 10, Roma"
          },
          {
            "selected": true,
            "text": "Viale della Previdenza Sociale, 20, Roma",
            "value": "Viale della Previdenza Sociale, 20, Roma"
          },
          {
            "selected": false,
            "text": "Vicolo del Bottino, 1, Roma",
            "value": "Vicolo del Bottino, 1, Roma"
          }
        ],
        "query": "select posizione from connessioni where municipio in ($municipio) group by posizione;",
        "refresh": 0,
        "regex": "",
        "skipUrlSync": false,
        "sort": 1,
        "tagValuesQuery": "",
        "tags": [],
        "tagsQuery": "",
        "type": "query",
        "useTags": false
      }
    ]
  },
  "time": {
    "from": "2020-06-24T00:00:00.000Z",
    "to": "2020-06-27T23:59:59.000Z"
  },
  "timepicker": {
    "refresh_intervals": [
      "5s",
      "10s",
      "30s",
      "1m",
      "5m",
      "15m",
      "30m",
      "1h",
      "2h",
      "1d"
    ]
  },
  "timezone": "utc",
  "title": "Roma open data",
  "uid": "xkQNiBdMz",
  "version": 1
}